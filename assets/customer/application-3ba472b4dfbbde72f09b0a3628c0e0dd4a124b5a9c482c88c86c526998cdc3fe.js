function start_loading(){$("button[name='gateway']").prop("disabled",!0)}function done_loading(){$("button[name='gateway']").prop("disabled",!1)}function update_delivery_methods(e){start_loading(),$.ajax({method:"GET",url:"/order_types/"+e+"/carts/delivery_methods"}).done(function(){done_loading()})}function select_delivery(e,t){start_loading(),$.post("/order_types/"+t+"/checkout/select_delivery",{delivery_type:e},function(e){console.log(e),update_cart_delivery(e),done_loading()},"json")}function update_cart_delivery(e){$("#standard-method").css("display",e.standard_available?"block":"none"),$("#express-method").css("display",e.express_available?"block":"none"),$("#pickup_in_store-method").css("display",e.pickup_in_store_available?"block":"none"),console.log("test"),$("[data-cart-id-delivery-method-standard="+e.cart_id+"]").html(e.standard_label),$("[data-cart-id-delivery-method-express="+e.cart_id+"]").html(e.express_label),$("[data-cart-id-delivery-method-pickup_in_store="+e.cart_id+"]").html(e.pickup_in_store_label),$(".selected-delivery-type").html(e.delivery_type_text),$("[data-cart-id-delivery-total="+e.cart_id+"]").html(e.delivery_total),$("[data-cart-id-extra-amounts="+e.cart_id+"]").html(e.extra_amounts_partial),$("[data-cart-id-total="+e.cart_id+"]").html(e.total),$(":radio[value="+e.selected_delivery_type+"]").prop("checked",!0),"pickup_in_store"==e.selected_delivery_type?($("#delivery-address-fields").css("display","none"),$("#pickup-in-store-info").css("display","block"),$("input[name='order[deliveries_attributes][0][address_required]']").val("false")):($("#delivery-address-fields").css("display","block"),$("#pickup-in-store-info").css("display","none"),$("input[name='order[deliveries_attributes][0][address_required]']").val("true"))}function update_address(e){8==(e=e.replace(/\D/g,"")).length&&$.get("/find_postal_code/cep/"+e,function(e){$(".form_address_one").val(e.street),$(".form_address_two").val(e.neighborhood),$(".form_address_city").val(e.city),$(".form_address_state").val(e.state)})}function postal_code_valid(e,t){if("cep"==e){return 8==t.replace(/\D/g,"").length}}function scroll(){var e,t=null;if(t!=(e=$(".pagination").find("a[rel=next]").attr("href")))return t=e,$.getScript(e)}$(document).on("turbolinks:click turbolinks:request-start",function(){NProgress.start(),NProgress.set(.6)}),$(document).on("turbolinks:render",function(){NProgress.done(),NProgress.remove()}),$(document).on("ajaxStart",function(){NProgress.start()}),$(document).on("ajaxStop",function(){.6!=NProgress.status&&NProgress.done()}),document.addEventListener("turbolinks:load",function(){var e=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},t={onKeyPress:function(t,r,o,a){o.mask(e.apply({},arguments),a)}};$(".form_phone_number").mask(e,t),$(".form_cpf_cnpj.cpf").mask("000.000.000-00",{reverse:!0}),$(".form_cpf_cnpj.cnpj").mask("00.000.000/0000-00",{reverse:!0}),$(".form_cpf_cnpj.cpf").change(function(){1==TestaCPF($(this).val())?($(this).removeClass("form-control-danger"),$(this).parent("div.form-group").removeClass("has-danger"),$(this).addClass("form-control-success"),$(this).parent("div.form-group").addClass("has-success")):($(this).removeClass("form-control-success"),$(this).parent("div.form-group").removeClass("has-success"),$(this).addClass("form-control-danger"),$(this).parent("div.form-group").addClass("has-danger"))}),$(".form_cpf_cnpj.cnpj").change(function(){1==validarCNPJ($(this).val())?($(this).removeClass("form-control-danger"),$(this).parent("div.form-group").removeClass("has-danger"),$(this).addClass("form-control-success"),$(this).parent("div.form-group").addClass("has-success")):($(this).removeClass("form-control-success"),$(this).parent("div.form-group").removeClass("has-success"),$(this).addClass("form-control-danger"),$(this).parent("div.form-group").addClass("has-danger"))}),$("#order_payment_id_document").on("change",function(){$("#order_payment_credit_card_document").val(this.value),$("#order_payment_credit_card_document_type").val($("#order_payment_id_document_type").val())}),$("#order_payment_id_document_type").on("change",function(){$("#order_payment_credit_card_document_type").val(this.value)}),$(".form_cpf_cnpj_selector").on("change",function(){"cnpj"==this.value?($(".form_cpf_cnpj").removeClass("cpf"),$(".form_cpf_cnpj").addClass("cnpj"),$(".form_cpf_cnpj").mask("00.000.000/0000-00",{reverse:!0})):"cpf"==this.value&&($(".form_cpf_cnpj").removeClass("cnpj"),$(".form_cpf_cnpj").addClass("cpf"),$(".form_cpf_cnpj").mask("000.000.000-00",{reverse:!0}))})});var current_url=null;document.addEventListener("turbolinks:load",function(){}),document.addEventListener("turbolinks:load",function(){var e=[];$(".input_required").each(function(){e.push(this.id)}),$(".input_required").bind("keyup change input",function(){var t=!0;for(i=0,len=e.length;i<len;i++)t=$("#"+e[i]).val().length>1?t&&!0:t&&!1;$(".next-step-payment").attr("disabled",!t)}),$("[name*='[custom_fields]']").bind("keyup change input",function(){});var t=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},r={onKeyPress:function(e,r,o,a){o.mask(t.apply({},arguments),a)}};$(".phone.pt-BR").mask(t,r),$(".date").mask("00/00/0000"),$('[data-toggle="popover"]').popover({trigger:"hover"}),$(".popover-order-state").popover({trigger:"hover"}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),window.setTimeout(function(){$(".alert").css({position:"relative","box-shadow":"none",width:"100%",height:"100%",top:0,left:0,"margin-top":"0","margin-left":"0"})},5e3),window.setTimeout(function(){$(".alert-dismissable").fadeTo(6e3,0).slideUp(500,function(){})},2e3),$(".sp-wrap").smoothproducts()});